<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXTRACTION PROTOCOL: ALPHA-10</title>
    <style>
        body { background-color: #000; color: #ff9d00; font-family: 'Courier New', monospace; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 10px; box-sizing: border-box; }
        #terminal { width: 100%; max-width: 900px; border: 1px solid #ff9d00; padding: 20px; background: rgba(10, 10, 10, 0.95); box-shadow: 0 0 30px rgba(255, 157, 0, 0.2); position: relative; }
        input { background: transparent; border: none; border-bottom: 2px solid #ff9d00; color: #fff; font-size: 1.5rem; width: 100%; outline: none; margin-top: 20px; text-transform: uppercase; }
        .hidden { display: none; }
        .data-row { color: #666; font-size: 0.8rem; margin-bottom: 5px; }
        
        /* Final Reveal Layout */
        #final { color: #fff; display: flex; flex-direction: column; height: 85vh; }
        .reveal-header { display: grid; grid-template-columns: 1fr 2fr 1fr; align-items: center; border-bottom: 2px solid #00d4ff; padding-bottom: 15px; margin-bottom: 15px; }
        .logo { height: 60px; width: auto; justify-self: center; }
        .mission-intel { text-align: center; }
        .mission-intel h1 { color: #00d4ff; margin: 0; font-size: 1.1rem; letter-spacing: 2px; }
        .mission-intel p { margin: 5px 0; font-size: 0.9rem; }
        
        /* The Map Fix */
        .map-frame-wrapper { flex-grow: 1; border: 1px solid #333; position: relative; background: #111; border-radius: 4px; overflow: hidden; }
        iframe { width: 100%; height: 100%; border: none; }
        
        .coordinates-bar { display: flex; justify-content: space-between; padding: 10px 0; font-size: 0.8rem; color: #00d4ff; font-weight: bold; }
        .highlight { color: #FFD700; }

        @media (max-width: 600px) {
            .reveal-header { grid-template-columns: 1fr 1fr; }
            .vs { display: none; }
            .logo { height: 45px; }
            #terminal { padding: 10px; }
        }
    </style>
</head>
<body>

<div id="terminal">
    <div id="step1">
        <div class="data-row">LOC: GERMANY // STATUS: ENCRYPTED</div>
        <h1>[PHASE 1: PERSONNEL]</h1>
        <p>> Enter the unit range (X-X):</p>
        <input type="text" id="ans1" autofocus autocomplete="off">
    </div>

    <div id="step2" class="hidden">
        <div class="data-row">ALTITUDE LOCK REQUIRED</div>
        <h1>[PHASE 2: ELEVATION]</h1>
        <p>> Enter the elevation (Standard car wheels):</p>
        <input type="text" id="ans2" autocomplete="off">
    </div>

    <div id="step3" class="hidden">
        <h1>[PHASE 3: SECTOR]</h1>
        <p>> (Area 51 x 4) + 8 = ?</p>
        <input type="text" id="ans3" autocomplete="off">
    </div>

    <div id="step4" class="hidden">
        <h1>[PHASE 4: LOCAL TIME]</h1>
        <p>> Enter the Local US Date (MMDD):</p>
        <input type="text" id="ans4" autocomplete="off">
    </div>

    <div id="final" class="hidden">
        <div class="reveal-header">
            <img class="logo" src="https://cdn.nba.com/logos/nba/1610612743/primary/L/logo.svg" alt="Nuggets">
            <div class="mission-intel">
                <h1>OPERATION: BALL ARENA</h1>
                <p>NUGGETS vs THUNDER | APRIL 10</p>
                <p class="highlight">SELECT HEALTH CLUB LEVEL</p>
            </div>
            <img class="logo" src="https://cdn.nba.com/logos/nba/1610612760/primary/L/logo.svg" alt="Thunder">
        </div>

        <div class="coordinates-bar">
            <span>SEC: 212</span>
            <span>ROW: 4</span>
            <span>SEATS: 1-7</span>
        </div>

        <div class="map-frame-wrapper">
            <iframe src="https://3ddigitalvenue.com/3dmap/clients/denver-nuggets/"></iframe>
        </div>
        
        <p class="data-row" style="text-align: center; margin-top: 10px;">> USE TOUCH/MOUSE TO NAVIGATE THE 3D INTERFACE</p>
    </div>
</div>

<script>
    const keys = { ans1: "1-7", ans2: "4", ans3: "212", ans4: "0410" };

    document.querySelectorAll('input').forEach(input => {
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                if (input.value.trim() === keys[input.id]) {
                    input.parentElement.classList.add('hidden');
                    const next = input.parentElement.nextElementSibling;
                    next.classList.remove('hidden');
                    const nextInput = next.querySelector('input');
                    if (nextInput) nextInput.focus();
                    
                    // Specific fix to ensure terminal box expands for the final map
                    if (next.id === "final") {
                        document.getElementById('terminal').style.height = "90vh";
                        document.getElementById('terminal').style.maxWidth = "1100px";
                    }
                } else {
                    input.style.borderBottomColor = "red";
                    setTimeout(() => { input.style.borderBottomColor = "#ff9d00"; }, 500);
                    input.value = "";
                }
            }
        });
    });
</script>

</body>
</html>
